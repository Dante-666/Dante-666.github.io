<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="451px" preserveAspectRatio="none" style="width:598px;height:451px;" version="1.1" viewBox="0 0 598 451" width="598px" zoomAndPan="magnify"><defs><filter height="300%" id="f15v9vcy9u5hte" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[3637e2e3ff64f8c7ec072f5df5e3a1dc]
class Expression--><rect codeLine="2" fill="#FEFECE" filter="url(#f15v9vcy9u5hte)" height="48" id="Expression" style="stroke:#A80036;stroke-width:1.5;" width="99" x="126.5" y="7"/><ellipse cx="141.5" cy="23" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M141.6094,18.3438 L140.4531,23.4219 L142.7813,23.4219 L141.6094,18.3438 Z M140.125,16.1094 L143.1094,16.1094 L146.4688,28.5 L144.0156,28.5 L143.25,25.4375 L139.9688,25.4375 L139.2188,28.5 L136.7813,28.5 L140.125,16.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="67" x="155.5" y="27.1543">Expression</text><line style="stroke:#A80036;stroke-width:1.5;" x1="127.5" x2="224.5" y1="39" y2="39"/><line style="stroke:#A80036;stroke-width:1.5;" x1="127.5" x2="224.5" y1="47" y2="47"/><!--MD5=[ff3d20c1112759d46dde2fcead238479]
class Value--><rect codeLine="4" fill="#FEFECE" filter="url(#f15v9vcy9u5hte)" height="60.8047" id="Value" style="stroke:#A80036;stroke-width:1.5;" width="74" x="7" y="121.5"/><ellipse cx="25.15" cy="137.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M28.1188,143.1406 Q27.5406,143.4375 26.9,143.5781 Q26.2594,143.7344 25.5563,143.7344 Q23.0563,143.7344 21.7281,142.0938 Q20.4156,140.4375 20.4156,137.3125 Q20.4156,134.1875 21.7281,132.5313 Q23.0563,130.875 25.5563,130.875 Q26.2594,130.875 26.9,131.0313 Q27.5563,131.1875 28.1188,131.4844 L28.1188,134.2031 Q27.4938,133.625 26.9,133.3594 Q26.3063,133.0781 25.6813,133.0781 Q24.3375,133.0781 23.65,134.1563 Q22.9625,135.2188 22.9625,137.3125 Q22.9625,139.4063 23.65,140.4844 Q24.3375,141.5469 25.6813,141.5469 Q26.3063,141.5469 26.9,141.2813 Q27.4938,141 28.1188,140.4219 L28.1188,143.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="35" x="39.85" y="141.6543">Value</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="80" y1="153.5" y2="153.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="161.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="48" x="27" y="167.7104">int value</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="80" y1="174.3047" y2="174.3047"/><!--MD5=[4e916b5516e51ac6308a192ab863475a]
class Addition--><rect codeLine="7" fill="#FEFECE" filter="url(#f15v9vcy9u5hte)" height="73.6094" id="Addition" style="stroke:#A80036;stroke-width:1.5;" width="120" x="116" y="115"/><ellipse cx="147.65" cy="131" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M150.6188,136.6406 Q150.0406,136.9375 149.4,137.0781 Q148.7594,137.2344 148.0563,137.2344 Q145.5563,137.2344 144.2281,135.5938 Q142.9156,133.9375 142.9156,130.8125 Q142.9156,127.6875 144.2281,126.0313 Q145.5563,124.375 148.0563,124.375 Q148.7594,124.375 149.4,124.5313 Q150.0563,124.6875 150.6188,124.9844 L150.6188,127.7031 Q149.9938,127.125 149.4,126.8594 Q148.8063,126.5781 148.1813,126.5781 Q146.8375,126.5781 146.15,127.6563 Q145.4625,128.7188 145.4625,130.8125 Q145.4625,132.9063 146.15,133.9844 Q146.8375,135.0469 148.1813,135.0469 Q148.8063,135.0469 149.4,134.7813 Q149.9938,134.5 150.6188,133.9219 L150.6188,136.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="51" x="165.35" y="135.1543">Addition</text><line style="stroke:#A80036;stroke-width:1.5;" x1="117" x2="235" y1="147" y2="147"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="124" y="155"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="136" y="161.2104">Expression&amp; lhs</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="124" y="167.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="136" y="174.0151">Expression&amp; lhs</text><line style="stroke:#A80036;stroke-width:1.5;" x1="117" x2="235" y1="180.6094" y2="180.6094"/><!--MD5=[a80aeb25cfca85a61c4213d8f76e28b6]
class Multiplication--><rect codeLine="11" fill="#FEFECE" filter="url(#f15v9vcy9u5hte)" height="73.6094" id="Multiplication" style="stroke:#A80036;stroke-width:1.5;" width="120" x="271" y="115"/><ellipse cx="288.7" cy="131" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M291.6688,136.6406 Q291.0906,136.9375 290.45,137.0781 Q289.8094,137.2344 289.1063,137.2344 Q286.6063,137.2344 285.2781,135.5938 Q283.9656,133.9375 283.9656,130.8125 Q283.9656,127.6875 285.2781,126.0313 Q286.6063,124.375 289.1063,124.375 Q289.8094,124.375 290.45,124.5313 Q291.1063,124.6875 291.6688,124.9844 L291.6688,127.7031 Q291.0438,127.125 290.45,126.8594 Q289.8563,126.5781 289.2313,126.5781 Q287.8875,126.5781 287.2,127.6563 Q286.5125,128.7188 286.5125,130.8125 Q286.5125,132.9063 287.2,133.9844 Q287.8875,135.0469 289.2313,135.0469 Q289.8563,135.0469 290.45,134.7813 Q291.0438,134.5 291.6688,133.9219 L291.6688,136.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="82" x="303.3" y="135.1543">Multiplication</text><line style="stroke:#A80036;stroke-width:1.5;" x1="272" x2="390" y1="147" y2="147"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279" y="155"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="291" y="161.2104">Expression&amp; lhs</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="279" y="167.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="94" x="291" y="174.0151">Expression&amp; lhs</text><line style="stroke:#A80036;stroke-width:1.5;" x1="272" x2="390" y1="180.6094" y2="180.6094"/><!--MD5=[53bf68ed638bcf4718423098b3d480ea]
class Visitor--><rect codeLine="19" fill="#FEFECE" filter="url(#f15v9vcy9u5hte)" height="60.8047" id="Visitor" style="stroke:#A80036;stroke-width:1.5;" width="158" x="426" y="121.5"/><ellipse cx="481.75" cy="137.5" fill="#A9DCDF" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M481.8594,132.8438 L480.7031,137.9219 L483.0313,137.9219 L481.8594,132.8438 Z M480.375,130.6094 L483.3594,130.6094 L486.7188,143 L484.2656,143 L483.5,139.9375 L480.2188,139.9375 L479.4688,143 L477.0313,143 L480.375,130.6094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="38" x="502.25" y="141.6543">Visitor</text><line style="stroke:#A80036;stroke-width:1.5;" x1="427" x2="583" y1="153.5" y2="153.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="427" x2="583" y1="161.5" y2="161.5"/><ellipse cx="437" cy="172.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" font-style="italic" lengthAdjust="spacing" textLength="132" x="446" y="175.7104">visit(Expression&amp; expr)</text><!--MD5=[69f2f3ad3645114d26612368d508f737]
class Printer--><rect codeLine="23" fill="#FEFECE" filter="url(#f15v9vcy9u5hte)" height="188.8516" id="Printer" style="stroke:#A80036;stroke-width:1.5;" width="298" x="60" y="249"/><ellipse cx="183.75" cy="265" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M186.7188,270.6406 Q186.1406,270.9375 185.5,271.0781 Q184.8594,271.2344 184.1563,271.2344 Q181.6563,271.2344 180.3281,269.5938 Q179.0156,267.9375 179.0156,264.8125 Q179.0156,261.6875 180.3281,260.0313 Q181.6563,258.375 184.1563,258.375 Q184.8594,258.375 185.5,258.5313 Q186.1563,258.6875 186.7188,258.9844 L186.7188,261.7031 Q186.0938,261.125 185.5,260.8594 Q184.9063,260.5781 184.2813,260.5781 Q182.9375,260.5781 182.25,261.6563 Q181.5625,262.7188 181.5625,264.8125 Q181.5625,266.9063 182.25,267.9844 Q182.9375,269.0469 184.2813,269.0469 Q184.9063,269.0469 185.5,268.7813 Q186.0938,268.5 186.7188,267.9219 L186.7188,270.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="42" x="204.25" y="269.1543">Printer</text><line style="stroke:#A80036;stroke-width:1.5;" x1="61" x2="357" y1="281" y2="281"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="68" y="289"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="99" x="80" y="295.2104">stringstream oss</text><line style="stroke:#A80036;stroke-width:1.0;" x1="61" x2="357" y1="301.8047" y2="301.8047"/><ellipse cx="71" cy="312.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="133" x="80" y="316.0151">visit(Expression&amp; expr)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="230" x="80" y="328.8198">if (auto de = dynamic_cast&lt;Value&amp;&gt;(e))</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="112" y="341.6245">oss &lt;&lt; de.value</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="272" x="80" y="354.4292">else if (auto ae = dynamic_cast&lt;Addition&amp;&gt;(e))</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="61" x="112" y="367.2339">oss &lt;&lt; "("</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="67" x="112" y="380.0386">visit(ae.left)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="66" x="112" y="392.8433">oss &lt;&lt; "+"</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="112" y="405.6479">visit(ae.right)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="61" x="112" y="418.4526">oss &lt;&lt; ")"</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="47" x="80" y="431.2573">else if...</text><!--MD5=[8e7b4fdb525ee12c3e8d624d9db4aaa7]
class Evaluator--><rect codeLine="38" fill="#FEFECE" filter="url(#f15v9vcy9u5hte)" height="73.6094" id="Evaluator" style="stroke:#A80036;stroke-width:1.5;" width="159" x="425.5" y="306.5"/><ellipse cx="471.25" cy="322.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M474.2188,328.1406 Q473.6406,328.4375 473,328.5781 Q472.3594,328.7344 471.6563,328.7344 Q469.1563,328.7344 467.8281,327.0938 Q466.5156,325.4375 466.5156,322.3125 Q466.5156,319.1875 467.8281,317.5313 Q469.1563,315.875 471.6563,315.875 Q472.3594,315.875 473,316.0313 Q473.6563,316.1875 474.2188,316.4844 L474.2188,319.2031 Q473.5938,318.625 473,318.3594 Q472.4063,318.0781 471.7813,318.0781 Q470.4375,318.0781 469.75,319.1563 Q469.0625,320.2188 469.0625,322.3125 Q469.0625,324.4063 469.75,325.4844 Q470.4375,326.5469 471.7813,326.5469 Q472.4063,326.5469 473,326.2813 Q473.5938,326 474.2188,325.4219 L474.2188,328.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="59" x="491.75" y="326.6543">Evaluator</text><line style="stroke:#A80036;stroke-width:1.5;" x1="426.5" x2="583.5" y1="338.5" y2="338.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="433.5" y="346.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="43" x="445.5" y="352.7104">int total</text><line style="stroke:#A80036;stroke-width:1.5;" x1="426.5" x2="583.5" y1="359.3047" y2="359.3047"/><ellipse cx="436.5" cy="370.3047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="133" x="445.5" y="373.5151">visit(Expression&amp; expr)</text><!--MD5=[6b80e7eb9da08f51a279413cdef32010]
reverse link Expression to Value--><path codeLine="15" d="M135.35,68.64 C116.53,85.61 94.46,105.51 76.73,121.49 " fill="none" id="Expression-backto-Value" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="130.69,63.42,150.24,55.23,140.07,73.82,130.69,63.42" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[345e47141b068175f89006910964ebf2]
reverse link Expression to Addition--><path codeLine="16" d="M176,75.43 C176,88.33 176,102.32 176,114.71 " fill="none" id="Expression-backto-Addition" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="169,75.23,176,55.23,183,75.23,169,75.23" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[63c9ce6490a68e64108c49f24a1a31da]
reverse link Expression to Multiplication--><path codeLine="17" d="M222.41,67.63 C241.88,82.58 264.5,99.95 284.04,114.95 " fill="none" id="Expression-backto-Multiplication" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="217.85,72.96,206.25,55.23,226.38,61.85,217.85,72.96" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b94891c7bad610e60d86df326fe48107]
reverse link Visitor to Printer--><path codeLine="43" d="M441.57,193.61 C416.09,209.92 385.57,229.46 355.16,248.93 " fill="none" id="Visitor-backto-Printer" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="438.13,187.5,458.75,182.61,445.68,199.29,438.13,187.5" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[55eb4365cca98c16848c70fe541b6da4]
reverse link Visitor to Evaluator--><path codeLine="44" d="M505,202.89 C505,235.36 505,276.98 505,306.3 " fill="none" id="Visitor-backto-Evaluator" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="498,202.61,505,182.61,512,202.61,498,202.61" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[beb2eceb64d18da0417e019fd3fe74d1]
reverse link Multiplication to Printer--><path codeLine="46" d="M296.75,206.19 C288.22,219.45 278.82,234.06 269.43,248.63 " fill="none" id="Multiplication-backto-Printer" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="291.05,202.12,307.77,189.09,302.82,209.7,291.05,202.12" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[974559341aa80b4b20da2043d77190d7]
reverse link Addition to Printer--><path codeLine="47" d="M185.74,208.92 C187.92,221.44 190.29,235.05 192.65,248.63 " fill="none" id="Addition-backto-Printer" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="178.82,209.99,182.28,189.09,192.61,207.59,178.82,209.99" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[f1e8c897edc296067060fa82955c7d2c]
reverse link Value to Printer--><path codeLine="48" d="M83.3,198.13 C96.6,213.41 111.99,231.09 127.35,248.72 " fill="none" id="Value-backto-Printer" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="77.64,202.29,69.78,182.61,88.19,193.1,77.64,202.29" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[50e68ae04c5e3d09f01f3c8ab2d769d1]
@startuml

	abstract class Expression {
}
class Value {
-int value
}
class Addition {
-Expression& lhs
-Expression& lhs
}
class Multiplication {
-Expression& lhs
-Expression& lhs
}
Expression <|- - Value
Expression <|- - Addition
Expression <|- - Multiplication

abstract class Visitor {
+ {abstract} visit(Expression& expr)
}

class Printer {
-stringstream oss
- -
+ visit(Expression& expr)
if (auto de = dynamic_cast<Value&>(e))
\toss << de.value
else if (auto ae = dynamic_cast<Addition&>(e))
\toss << "("
\tvisit(ae.left)
\toss << "+"
\tvisit(ae.right)
\toss << ")"
else if...
}

class Evaluator {
-int total
+ visit(Expression& expr)
}

Visitor <|- - Printer
Visitor <|- - Evaluator

Multiplication <|.. Printer
Addition <|.. Printer
Value <|.. Printer
	
@enduml

PlantUML version 1.2021.00(Sun Jan 10 15:55:05 IST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>