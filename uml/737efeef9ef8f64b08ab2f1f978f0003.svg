<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="428px" preserveAspectRatio="none" style="width:990px;height:428px;" version="1.1" viewBox="0 0 990 428" width="990px" zoomAndPan="magnify"><defs><filter height="300%" id="fjf0pi6acw57q" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[a7dbee07e052eb86863001789e78e586]
class GhostEntity--><rect codeLine="2" fill="#FEFECE" filter="url(#fjf0pi6acw57q)" height="60.8047" id="GhostEntity" style="stroke:#A80036;stroke-width:1.5;" width="243" x="294" y="39"/><ellipse cx="375.25" cy="55" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M378.2188,60.6406 Q377.6406,60.9375 377,61.0781 Q376.3594,61.2344 375.6563,61.2344 Q373.1563,61.2344 371.8281,59.5938 Q370.5156,57.9375 370.5156,54.8125 Q370.5156,51.6875 371.8281,50.0313 Q373.1563,48.375 375.6563,48.375 Q376.3594,48.375 377,48.5313 Q377.6563,48.6875 378.2188,48.9844 L378.2188,51.7031 Q377.5938,51.125 377,50.8594 Q376.4063,50.5781 375.7813,50.5781 Q374.4375,50.5781 373.75,51.6563 Q373.0625,52.7188 373.0625,54.8125 Q373.0625,56.9063 373.75,57.9844 Q374.4375,59.0469 375.7813,59.0469 Q376.4063,59.0469 377,58.7813 Q377.5938,58.5 378.2188,57.9219 L378.2188,60.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="72" x="395.75" y="59.1543">GhostEntity</text><line style="stroke:#A80036;stroke-width:1.5;" x1="295" x2="536" y1="71" y2="71"/><line style="stroke:#A80036;stroke-width:1.5;" x1="295" x2="536" y1="79" y2="79"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="231" x="300" y="93.2104">virtual onSimulation(SimTime deltaTime)</text><!--MD5=[29de3f3f36c2e34760cdfba28d0174ee]
class SpawnerEntity--><rect codeLine="6" fill="#FEFECE" filter="url(#fjf0pi6acw57q)" height="222.4609" id="SpawnerEntity" style="stroke:#A80036;stroke-width:1.5;" width="387" x="7" y="192"/><ellipse cx="151.75" cy="208" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M154.7188,213.6406 Q154.1406,213.9375 153.5,214.0781 Q152.8594,214.2344 152.1563,214.2344 Q149.6563,214.2344 148.3281,212.5938 Q147.0156,210.9375 147.0156,207.8125 Q147.0156,204.6875 148.3281,203.0313 Q149.6563,201.375 152.1563,201.375 Q152.8594,201.375 153.5,201.5313 Q154.1563,201.6875 154.7188,201.9844 L154.7188,204.7031 Q154.0938,204.125 153.5,203.8594 Q152.9063,203.5781 152.2813,203.5781 Q150.9375,203.5781 150.25,204.6563 Q149.5625,205.7188 149.5625,207.8125 Q149.5625,209.9063 150.25,210.9844 Q150.9375,212.0469 152.2813,212.0469 Q152.9063,212.0469 153.5,211.7813 Q154.0938,211.5 154.7188,210.9219 L154.7188,213.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="89" x="172.25" y="212.1543">SpawnerEntity</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="393" y1="224" y2="224"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="232"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="95" x="27" y="238.2104">float m_time = 0</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="244.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="100" x="27" y="251.0151">float m_timer = 0</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="257.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="127" x="27" y="263.8198">bool m_spawn = false</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="270.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="28" x="27" y="276.6245">int id</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="283.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="78" x="27" y="289.4292">Any prototype</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="296.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="278" x="27" y="302.2339">vector&lt;shared_ptr&lt;Entity&gt;&gt; m_spawnedEntities</text><line style="stroke:#A80036;stroke-width:1.0;" x1="8" x2="393" y1="308.8281" y2="308.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="89" x="13" y="323.0386">SpawnerEntity()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="370" x="13" y="335.8433">virtual onSimulation(SimTime absoluteTime, SimTime deltaTime)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="8" x2="393" y1="342.4375" y2="342.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="125" x="13" y="356.6479">if (m_timer &gt; m_time)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="343" x="45" y="369.4526">shared_ptr&lt;Entity&gt; entity = PhysicsEntity::create(prototype)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="213" x="45" y="382.2573">m_spawnedEntities.push_back(entity)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="136" x="45" y="395.062">m_scene-&gt;insert(entity)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="71" x="45" y="407.8667">m_timer = 0</text><!--MD5=[a200504755a18eed7d754f4e801ff244]
class AttractorEntity--><rect codeLine="24" fill="#FEFECE" filter="url(#fjf0pi6acw57q)" height="158.4375" id="AttractorEntity" style="stroke:#A80036;stroke-width:1.5;" width="404" x="429.5" y="224"/><ellipse cx="581.75" cy="240" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M584.7188,245.6406 Q584.1406,245.9375 583.5,246.0781 Q582.8594,246.2344 582.1563,246.2344 Q579.6563,246.2344 578.3281,244.5938 Q577.0156,242.9375 577.0156,239.8125 Q577.0156,236.6875 578.3281,235.0313 Q579.6563,233.375 582.1563,233.375 Q582.8594,233.375 583.5,233.5313 Q584.1563,233.6875 584.7188,233.9844 L584.7188,236.7031 Q584.0938,236.125 583.5,235.8594 Q582.9063,235.5781 582.2813,235.5781 Q580.9375,235.5781 580.25,236.6563 Q579.5625,237.7188 579.5625,239.8125 Q579.5625,241.9063 580.25,242.9844 Q580.9375,244.0469 582.2813,244.0469 Q582.9063,244.0469 583.5,243.7813 Q584.0938,243.5 584.7188,242.9219 L584.7188,245.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="91" x="602.25" y="244.1543">AttractorEntity</text><line style="stroke:#A80036;stroke-width:1.5;" x1="430.5" x2="832.5" y1="256" y2="256"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="240" x="435.5" y="270.2104">shared_ptr&lt;PhysicsEntity&gt; m_invisAnchor</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="203" x="435.5" y="283.0151">vector&lt;Constraint*&gt; m_constraints</text><line style="stroke:#A80036;stroke-width:1.0;" x1="430.5" x2="832.5" y1="289.6094" y2="289.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="231" x="435.5" y="303.8198">virtual onSimulation(SimTime deltaTime)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,2.0;" x1="430.5" x2="832.5" y1="310.4141" y2="310.4141"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="379" x="435.5" y="324.6245">auto pEngine = GhostEntity::m_physicsScene-&gt;getPhysicsEngine()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="315" x="435.5" y="337.4292">if (auto physEntity = pEngine-&gt;getPrimaryCollider(this))</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="271" x="467.5" y="350.2339">pEngine-&gt;ignoreCollisionCheck(this, physEntity)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="149" x="467.5" y="363.0386">m_constraints.push_back(</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="328" x="499.5" y="375.8433">pEngine-&gt;addConstraint(m_invisAnchor.get(), physEntity))</text><!--MD5=[7d998290604532b21279e7f2b0117022]
class BulletPhysics--><rect codeLine="40" fill="#FEFECE" filter="url(#fjf0pi6acw57q)" height="124.8281" id="BulletPhysics" style="stroke:#A80036;stroke-width:1.5;" width="404" x="572.5" y="7"/><ellipse cx="729.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M732.7188,28.6406 Q732.1406,28.9375 731.5,29.0781 Q730.8594,29.2344 730.1563,29.2344 Q727.6563,29.2344 726.3281,27.5938 Q725.0156,25.9375 725.0156,22.8125 Q725.0156,19.6875 726.3281,18.0313 Q727.6563,16.375 730.1563,16.375 Q730.8594,16.375 731.5,16.5313 Q732.1563,16.6875 732.7188,16.9844 L732.7188,19.7031 Q732.0938,19.125 731.5,18.8594 Q730.9063,18.5781 730.2813,18.5781 Q728.9375,18.5781 728.25,19.6563 Q727.5625,20.7188 727.5625,22.8125 Q727.5625,24.9063 728.25,25.9844 Q728.9375,27.0469 730.2813,27.0469 Q730.9063,27.0469 731.5,26.7813 Q732.0938,26.5 732.7188,25.9219 L732.7188,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="750.25" y="27.1543">BulletPhysics</text><line style="stroke:#A80036;stroke-width:1.5;" x1="573.5" x2="975.5" y1="39" y2="39"/><line style="stroke:#A80036;stroke-width:1.5;" x1="573.5" x2="975.5" y1="47" y2="47"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="368" x="578.5" y="61.2104">virtual G3D::Constraint addConstraint(const G3D::Entity *entityA,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="151" x="642.5" y="74.0151">const G3D::Entity *entityB)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="342" x="578.5" y="86.8198">virtual removeConstraint(const G3D::Constraint *constraint)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="392" x="578.5" y="99.6245">virtual const G3D::Entity* getPrimaryCollider(const G3D::Entity *field)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="311" x="578.5" y="112.4292">virtual ignoreCollisionCheck(const G3D::Entity *trigger,</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="153" x="642.5" y="125.2339">const G3D::Entity *collider)</text><!--MD5=[e2bbebb59d0942cfba7335c3421a0400]
reverse link GhostEntity to SpawnerEntity--><path codeLine="37" d="M373.97,115.22 C353.56,137.19 327.99,164.73 302.8,191.85 " fill="none" id="GhostEntity-backto-SpawnerEntity" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="369.09,110.18,387.83,100.29,379.35,119.71,369.09,110.18" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[40c7ca4de1a480fc5167c0ad1fd0c735]
reverse link GhostEntity to AttractorEntity--><path codeLine="38" d="M457.3,115.3 C485.99,146.05 524.84,187.69 558.58,223.84 " fill="none" id="GhostEntity-backto-AttractorEntity" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="451.82,119.69,443.3,100.29,462.06,110.14,451.82,119.69" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[a7bbf5129621d1e6b01d7a70922cc1c6]
@startuml

class GhostEntity {
    virtual onSimulation(SimTime deltaTime)
}

class SpawnerEntity {
    -float m_time = 0
    -float m_timer = 0
    -bool m_spawn = false
    -int id
    -Any prototype
    -vector<shared_ptr<Entity>> m_spawnedEntities
    - -
    SpawnerEntity()
    virtual onSimulation(SimTime absoluteTime, SimTime deltaTime)
    ..
    if (m_timer > m_time) 
\tshared_ptr<Entity> entity = PhysicsEntity::create(prototype)
\tm_spawnedEntities.push_back(entity)
\tm_scene->insert(entity)
\tm_timer = 0
}

class AttractorEntity {
    shared_ptr<PhysicsEntity> m_invisAnchor
    vector<Constraint*> m_constraints
    - -
    virtual onSimulation(SimTime deltaTime)
    ..
    auto pEngine = GhostEntity::m_physicsScene->getPhysicsEngine()
    if (auto physEntity = pEngine->getPrimaryCollider(this))
\tpEngine->ignoreCollisionCheck(this, physEntity)
\tm_constraints.push_back(
\t\tpEngine->addConstraint(m_invisAnchor.get(), physEntity))
}

GhostEntity <|- - SpawnerEntity 
GhostEntity <|- - AttractorEntity 

class BulletPhysics {
    virtual G3D::Constraint addConstraint(const G3D::Entity *entityA,
\t\tconst G3D::Entity *entityB)
    virtual removeConstraint(const G3D::Constraint *constraint)
    virtual const G3D::Entity* getPrimaryCollider(const G3D::Entity *field)
    virtual ignoreCollisionCheck(const G3D::Entity *trigger,
\t\tconst G3D::Entity *collider)
}
      
@enduml

PlantUML version 1.2021.00(Sun Jan 10 15:55:05 IST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>