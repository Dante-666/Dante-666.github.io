<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="240px" preserveAspectRatio="none" style="width:431px;height:240px;" version="1.1" viewBox="0 0 431 240" width="431px" zoomAndPan="magnify"><defs><filter height="300%" id="fammotlxspeil" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[60d6b92408f98aed8df94d5c6e04aa63]
class State--><rect codeLine="2" fill="#FEFECE" filter="url(#fammotlxspeil)" height="60.8047" id="State" style="stroke:#A80036;stroke-width:1.5;" width="199" x="7" y="159.5"/><ellipse cx="85.25" cy="175.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M88.2188,181.1406 Q87.6406,181.4375 87,181.5781 Q86.3594,181.7344 85.6563,181.7344 Q83.1563,181.7344 81.8281,180.0938 Q80.5156,178.4375 80.5156,175.3125 Q80.5156,172.1875 81.8281,170.5313 Q83.1563,168.875 85.6563,168.875 Q86.3594,168.875 87,169.0313 Q87.6563,169.1875 88.2188,169.4844 L88.2188,172.2031 Q87.5938,171.625 87,171.3594 Q86.4063,171.0781 85.7813,171.0781 Q84.4375,171.0781 83.75,172.1563 Q83.0625,173.2188 83.0625,175.3125 Q83.0625,177.4063 83.75,178.4844 Q84.4375,179.5469 85.7813,179.5469 Q86.4063,179.5469 87,179.2813 Q87.5938,179 88.2188,178.4219 L88.2188,181.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="34" x="105.75" y="179.6543">State</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="205" y1="191.5" y2="191.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="205" y1="199.5" y2="199.5"/><ellipse cx="18" cy="210.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="173" x="27" y="213.7104">State* onTrigger(Trigger* trig)</text><!--MD5=[f8158362d3f9eaf6b261520465ba7069]
class Trigger--><rect codeLine="6" fill="#FEFECE" filter="url(#fammotlxspeil)" height="86.4141" id="Trigger" style="stroke:#A80036;stroke-width:1.5;" width="343" x="46" y="7"/><ellipse cx="191.25" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M194.2188,28.6406 Q193.6406,28.9375 193,29.0781 Q192.3594,29.2344 191.6563,29.2344 Q189.1563,29.2344 187.8281,27.5938 Q186.5156,25.9375 186.5156,22.8125 Q186.5156,19.6875 187.8281,18.0313 Q189.1563,16.375 191.6563,16.375 Q192.3594,16.375 193,16.5313 Q193.6563,16.6875 194.2188,16.9844 L194.2188,19.7031 Q193.5938,19.125 193,18.8594 Q192.4063,18.5781 191.7813,18.5781 Q190.4375,18.5781 189.75,19.6563 Q189.0625,20.7188 189.0625,22.8125 Q189.0625,24.9063 189.75,25.9844 Q190.4375,27.0469 191.7813,27.0469 Q192.4063,27.0469 193,26.7813 Q193.5938,26.5 194.2188,25.9219 L194.2188,28.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="44" x="211.75" y="27.1543">Trigger</text><line style="stroke:#A80036;stroke-width:1.5;" x1="47" x2="388" y1="39" y2="39"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="54" y="47"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="283" x="66" y="53.2104">map&lt;State*, pair&lt;Transition*, State*&gt;&gt; fromTo;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="47" x2="388" y1="59.8047" y2="59.8047"/><ellipse cx="57" cy="70.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="183" x="66" y="74.0151">State* transitionTo(State* from)</text><ellipse cx="57" cy="83.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="317" x="66" y="86.8198">registerTrans(State* from, Transition* trans, State* to)</text><!--MD5=[050210f0c16b51cfeb6b6da0e5dd6280]
class Transition--><rect codeLine="12" fill="#FEFECE" filter="url(#fammotlxspeil)" height="73.6094" id="Transition" style="stroke:#A80036;stroke-width:1.5;" width="176" x="241.5" y="153"/><ellipse cx="294.25" cy="169" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M297.2188,174.6406 Q296.6406,174.9375 296,175.0781 Q295.3594,175.2344 294.6563,175.2344 Q292.1563,175.2344 290.8281,173.5938 Q289.5156,171.9375 289.5156,168.8125 Q289.5156,165.6875 290.8281,164.0313 Q292.1563,162.375 294.6563,162.375 Q295.3594,162.375 296,162.5313 Q296.6563,162.6875 297.2188,162.9844 L297.2188,165.7031 Q296.5938,165.125 296,164.8594 Q295.4063,164.5781 294.7813,164.5781 Q293.4375,164.5781 292.75,165.6563 Q292.0625,166.7188 292.0625,168.8125 Q292.0625,170.9063 292.75,171.9844 Q293.4375,173.0469 294.7813,173.0469 Q295.4063,173.0469 296,172.7813 Q296.5938,172.5 297.2188,171.9219 L297.2188,174.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="314.75" y="173.1543">Transition</text><line style="stroke:#A80036;stroke-width:1.5;" x1="242.5" x2="416.5" y1="185" y2="185"/><line style="stroke:#A80036;stroke-width:1.5;" x1="242.5" x2="416.5" y1="193" y2="193"/><ellipse cx="252.5" cy="204" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="261.5" y="207.2104">void (*callback)(void)</text><ellipse cx="252.5" cy="216.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="150" x="261.5" y="220.0151">Transition(void (*cb)(void))</text><!--MD5=[762410a057967d6d7804fa94259214ca]
reverse link Trigger to State--><path codeLine="17" d="M175.32,103.45 C160.09,122.37 143.45,143.06 130.35,159.35 " fill="none" id="Trigger-backto-State" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="183.59,93.15,176.7113,95.314,176.0632,102.4959,182.9419,100.3319,183.59,93.15" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[523d139088b8b9cd2475a00fef7c9643]
reverse link Trigger to Transition--><path codeLine="18" d="M260.25,103.68 C273.54,120.05 287.87,137.71 300.04,152.7 " fill="none" id="Trigger-backto-Transition" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#FFFFFF" points="251.71,93.15,252.3864,100.3293,259.2736,102.4662,258.5972,95.2869,251.71,93.15" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[43251c7827782b6de531789d44841c1e]
@startuml

class State {
+ State* onTrigger(Trigger* trig)
}

class Trigger {
-map<State*, pair<Transition*, State*>> fromTo;
+ State* transitionTo(State* from)
+ registerTrans(State* from, Transition* trans, State* to)
}

class Transition {
+ void (*callback)(void)
+ Transition(void (*cb)(void))
}

Trigger o- - State
Trigger o- - Transition
	
@enduml

PlantUML version 1.2021.00(Sun Jan 10 15:55:05 IST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: ANSI_X3.4-1968
Language: en
Country: US
--></g></svg>